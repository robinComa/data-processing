<html>
<head>
    <title>DataProcessing : Current Work</title>
</head>

<body>

<!-- build:js ../dataProcessing.js -->
<script src="../src/copyright.js"></script>
<script src="../src/DataProcessing.js"></script>
<script src="../src/core/Utils.js"></script>
<script src="../src/core/Class.js"></script>
<script src="../src/job/Job.js"></script>
<script src="../src/pipe/Pipe.js"></script>
<script src="../src/pipe/MemoryPipe.js"></script>
<script src="../src/pipe/StoragePipe.js"></script>
<script src="../src/pipe/LocalStoragePipe.js"></script>
<script src="../src/pipe/SessionStoragePipe.js"></script>
<script src="../src/pipe/CloudPipe.js"></script>
<script src="../src/mapreduce/MapReduce.js"></script>
<!-- endbuild -->

<script>
    (function(){
        var texts = ['A piece of text', 'A piece of text...', 'A piece of text!'];
        var jobs = [];
        for(var i in texts){
            jobs.push(new DataProcessing.Job([texts[i]], function(text){
                return text.length;
            }));
        }

        var pipe = new DataProcessing.CloudPipe(jobs);

        pipe.onJob(function(job){
            job.run();
        });

        pipe.onResult(function(result){
            console.log(pipe._id, 'onResult', result);
        });

        pipe.onFinish(function(results){
            console.log(pipe._id, 'onFinish', results);
        });

    })();
    (function(){
        var texts = ['A piece of text', 'A piece of text...', 'A piece of text!'];
        var jobs = [];
        for(var i in texts){
            jobs.push(new DataProcessing.Job([texts[i]], function(text){
                return text.length;
            }));
        }

        var pipe = new DataProcessing.CloudPipe(jobs);

        pipe.onJob(function(job){
            job.run();
        });

        pipe.onResult(function(result){
            console.log(pipe._id, 'onResult', result);
        });

        pipe.onFinish(function(results){
            console.log(pipe._id, 'onFinish', results);
        });

    })();
</script>

</body>

</html>