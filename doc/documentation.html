<html>
<head>
    <title>DataProcessing : Documentation</title>

    <link rel="stylesheet" href="vendor/bootstrap/bootstrap.min.css"/>
    <link rel="stylesheet" href="vendor/highlightjs/highlightjs.css"/>

    <link rel="stylesheet" href="style/documentation.css">

</head>

<body>

<div class="container">

    <div class="header">
        <ul class="nav nav-pills pull-right">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="documentation.html">Documentation</a></li>
            <li><a target="_blank" href="https://github.com/robinComa/data-processing">Project</a></li>
        </ul>
        <h3 class="text-muted">Data Processing</h3>
    </div>

    <div class="row">

        <div class="col-xs-10">
            <section id="job">
                <h1>Job</h1>

                <p>
                    Used to do a complex job out of your DOM. It works on web worker.
                </p>

                <h3>Creation</h3>

                <table class="table table-condensed table-striped">
                    <thead>
                    <tr>
                        <th>Constructor</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>new DataProcessing.Job(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&gt; args, &lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; fn)</td>
                        <td>Instantiates a Job object</td>
                    </tr>
                    </tbody>
                </table>

                <h3>Methods</h3>

                <table class="table table-condensed table-striped">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Return</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>run()</td>
                            <td>&lt;this&gt;</td>
                            <td>Start the job on a new web worker</td>
                        </tr>
                        <tr>
                            <td>onFinish(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; fn)</td>
                            <td>&lt;this&gt;</td>
                            <td>Triggered when the job is finished</td>
                        </tr>
                    </tbody>
                </table>

                <pre><code id="job-code"></code></pre>
                <pre><code id="job-console" class="console"></code></pre>

                <article id="job-http">

                    <h2>$http</h2>

                    <p>
                        Used to do synchronous AJAX request inside a job.
                    </p>

                    <h3>Methods</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Method</th>
                            <th>Return</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>get(&lt;<a href="http://www.w3schools.com/js/js_obj_string.asp">String</a>&gt; url)</td>
                            <td>&lt;<a href="http://www.w3schools.com/js/js_objects.asp">Object</a>&gt;</td>
                            <td>AJAX JSON request</td>
                        </tr>
                        </tbody>
                    </table>

                    <pre><code id="job-http-code"></code></pre>
                    <pre><code id="job-http-console" class="console"></code></pre>

                </article>

            </section>

            <section id="pipe">
                <h1>Pipe</h1>

                <p>
                    Used to exchange jobs results and process on a unique "pipe".
                </p>

                <article id="pipe-interface">

                    <h2>Pipe Interface</h2>

                    <p>
                        All pipes objects extend this Pipe interface.
                    </p>

                    <h3>Creation</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Constructor</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>new DataProcessing.Pipe(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&lt;<a href="#job">Job</a>&gt;&gt; jobs)</td>
                            <td>Instantiates a Pipe object with a set of Job</td>
                        </tr>
                        </tbody>
                    </table>

                    <h3>Methods</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Method</th>
                            <th>Return</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>onResult(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; fn(&lt;<a href="http://www.w3schools.com/js/js_objects.asp">Object</a>&gt; result))</td>
                            <td>&lt;this&gt;</td>
                            <td>Triggered when a job result is receive</td>
                        </tr>
                        <tr>
                            <td>onFinish(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; fn(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&gt; results))</td>
                            <td>&lt;this&gt;</td>
                            <td>Triggered when all jobs are finished</td>
                        </tr>
                        <tr>
                            <td>onJob(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; fn(&lt;<a href="#job">Job</a>&gt; job))</td>
                            <td>&lt;this&gt;</td>
                            <td>Triggered when a job is receive</td>
                        </tr>
                        <tr>
                            <td>clear()</td>
                            <td>&lt;this&gt;</td>
                            <td>Remove all the jobs and results into the pipe</td>
                        </tr>
                        </tbody>
                    </table>

                </article>

                <article id="pipe-memory">

                    <h2>MemoryPipe</h2>

                    <p>
                        A MemoryPipe is a Pipe. It works on the browser tab.
                    </p>

                    <h3>Creation</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Constructor</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>new DataProcessing.MemoryPipe(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&lt;<a href="#job">Job</a>&gt;&gt; jobs)</td>
                            <td>Instantiates a in memory Pipe object with a set of Job</td>
                        </tr>
                        </tbody>
                    </table>

                    <pre><code id="pipe-memory-storage-code"></code></pre>
                    <pre><code id="pipe-memory-storage-console" class="console"></code></pre>

                </article>

                <article id="pipe-session-storage">

                    <h2>SessionStoragePipe</h2>

                    <p>
                        A SessionStoragePipe is a Pipe. It works on the browser during all the navigation. This pipe could be share between multiple browser tabs. It uses the Web Session Storage.
                    </p>

                    <h3>Creation</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Constructor</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>new DataProcessing.SessionStoragePipe(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&lt;<a href="#job">Job</a>&gt;&gt; jobs)</td>
                            <td>Instantiates a SessionStoragePipe object with a set of Job</td>
                        </tr>
                        </tbody>
                    </table>

                    <pre><code id="pipe-session-storage-code"></code></pre>
                    <pre><code id="pipe-session-storage-console" class="console"></code></pre>

                </article>

                <article id="pipe-local-storage">

                    <h2>LocalStoragePipe</h2>

                    <p>
                        A LocalStoragePipe is a Pipe. It works on the browser. This pipe could be share between multiple browser tabs. It uses the Web Local Storage.
                    </p>

                    <h3>Creation</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Constructor</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>new DataProcessing.LocalStoragePipe(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&lt;<a href="#job">Job</a>&gt;&gt; jobs)</td>
                            <td>Instantiates a LocalStoragePipe object with a set of Job</td>
                        </tr>
                        </tbody>
                    </table>

                    <pre><code id="pipe-local-storage-code"></code></pre>
                    <pre><code id="pipe-local-storage-console" class="console"></code></pre>

                </article>

                <article id="pipe-cloud">

                    <h2>CloudPipe</h2>

                    <p>
                        A CloudPipe is a Pipe. It works on the internet cloud. This pipe could be share between multiple browser on the internet. It uses the <a href="https://www.firebase.com/">Firebase</a> API.
                    </p>

                    <h3>Creation</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Constructor</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>new DataProcessing.CloudPipe(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&lt;<a href="#job">Job</a>&gt;&gt; jobs)</td>
                            <td>Instantiates a CloudPipe object with a set of Job</td>
                        </tr>
                        </tbody>
                    </table>

                    <pre><code id="pipe-cloud-code"></code></pre>
                    <pre><code id="pipe-cloud-console" class="console"></code></pre>

                </article>

                <article id="map-reduce">

                    <h2>MapReduce</h2>

                    <p>
                        A <a target="_blank" href="http://en.wikipedia.org/wiki/MapReduce">Map Reduce</a> paradigm implementation over a <a href="#pipe">Pipe</a>.
                    </p>

                    <h3>Creation</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Constructor</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>new DataProcessing.MapReduce(&lt;<a href="#pipe">Pipe</a>&gt; pipeImplClass)</td>
                            <td>
                                Instantiates a MapReduce object over a type of <a href="#pipe">Pipe</a> implementation :
                                <ul>
                                    <li><a href="#pipe-memory">MemoryStorage</a></li>
                                    <li><a href="#pipe-session-storage">SessionStoragePipe</a></li>
                                    <li><a href="#pipe-local-storage">LocalStoragePipe</a></li>
                                    <li><a href="#pipe-cloud">CloudPipe</a></li>
                                </ul>
                             </td>
                        </tr>
                        </tbody>
                    </table>

                    <h3>Methods</h3>

                    <table class="table table-condensed table-striped">
                        <thead>
                        <tr>
                            <th>Method</th>
                            <th>Return</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>addCollection(&lt;<a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>&lt;<a href="http://www.w3schools.com/js/js_objects.asp">Object</a>&gt;&gt;)</td>
                            <td>&lt;this&gt;</td>
                            <td>Each objects of this collection are the inputs of the map function.</td>
                        </tr>
                        <tr>
                            <td>addCollection(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; collectionGenerator)</td>
                            <td>&lt;this&gt;</td>
                            <td>The collectionGenerator should return an <a href="http://www.w3schools.com/js/js_obj_array.asp">Array</a>. Each objects of this collection are the inputs of the map function.</td>
                        </tr>
                        <tr>
                            <td>map(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; fn)</td>
                            <td>&lt;this&gt;</td>
                            <td>It is map function executed for each jobs. It is executed on <a target="_blank" href="http://en.wikipedia.org/wiki/Web_worker">Web Worker</a>.</td>
                        </tr>
                        <tr>
                            <td>reduce(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; fn)</td>
                            <td>&lt;this&gt;</td>
                            <td>Receive a map result and update the global result. It is executed on <a target="_blank" href="http://en.wikipedia.org/wiki/Web_worker">Web Worker</a>.</td>
                        </tr>
                        <tr>
                            <td>then(&lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; resolve, &lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; reject, &lt;<a href="http://www.w3schools.com/js/js_functions.asp">function</a>&gt; notify)</td>
                            <td>&lt;this&gt;</td>
                            <td>The promise callbacks.</td>
                        </tr>
                        </tbody>
                    </table>

                    <pre><code id="map-reduce-code"></code></pre>
                    <pre><code id="map-reduce-console" class="console"></code></pre>

                </article>

            </section>
        </div>

        <div class="col-xs-2">
            <ul id="toc">
                <li class="active">
                    <a href="#job">
                        Job
                    </a>
                    <ul>
                        <li>
                            <a href="#job-http">
                                $http
                            </a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#pipe">
                        Pipe
                    </a>
                    <ul>
                        <li>
                            <a href="#pipe-interface">
                                Pipe Interface
                            </a>
                        </li>
                        <li>
                            <a href="#pipe-memory">
                                MemoryPipe
                            </a>
                        </li>
                        <li>
                            <a href="#pipe-session-storage">
                                SessionStoragePipe
                            </a>
                        </li>
                        <li>
                            <a href="#pipe-local-storage">
                                LocalStoragePipe
                            </a>
                        </li>
                        <li>
                            <a href="#pipe-cloud">
                                CloudPipe
                            </a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#map-reduce">
                        MapReduce
                    </a>
                    <ul>
                        <li>
                            <a href="#job-http">
                                $http
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>

    </div>

</div> <!-- /container -->

<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/bootstrap.min.js"></script>
<script src="vendor/highlight/highlight.pack.js"></script>

<script src="../dataProcessing.js"></script>

<script class="code" data-target="#job-code">
(function(){
    var j = new DataProcessing.Job(['A piece of text'], function(text){
        // I am executed by a web worker
        // Do something difficult
        // Your context is only the function with parameters
        return text.length;
    });

    j.onFinish(function(result){
        console.log('#job-console', result);
    });

    j.run();
})();
</script>

<script class="code" data-target="#job-http-code">
(function(){
    var j = new DataProcessing.Job(['$http'], function($http){
        var worker_ip = $http.get('http://ip.jsontest.com/');
        return worker_ip;
    });

    j.onFinish(function(result){
        console.log('#job-http-console', result);
    });

    j.run();
})();
</script>

<script class="code" data-target="#pipe-memory-storage-code">
(function(){
    var texts = ['A piece of text', 'A piece of text...', 'A piece of text!'];
    var jobs = [];
    for(var i in texts){
        jobs.push(new DataProcessing.Job([texts[i]], function(text){
            return text.length;
        }));
    }

    var pipe = new DataProcessing.MemoryPipe(jobs);

    pipe.onJob(function(job){
        job.run();
    });

    pipe.onResult(function(result){
        console.log('#pipe-memory-storage-console', result);
    });

    pipe.onFinish(function(results){
        console.log('#pipe-memory-storage-console', results);
    });

})();
</script>

<script class="code" data-target="#pipe-session-storage-code">
(function(){
    var texts = ['A piece of text', 'A piece of text...', 'A piece of text!'];
    var jobs = [];
    for(var i in texts){
        jobs.push(new DataProcessing.Job([texts[i]], function(text){
            return text.length;
        }));
    }

    var pipe = new DataProcessing.SessionStoragePipe(jobs);

    pipe.onJob(function(job){
        job.run();
    });

    pipe.onResult(function(result){
        console.log('#pipe-session-storage-console', result);
    });

    pipe.onFinish(function(results){
        console.log('#pipe-session-storage-console', results);
    });

})();
</script>

<script class="code" data-target="#pipe-local-storage-code">
(function(){
    var texts = ['A piece of text', 'A piece of text...', 'A piece of text!'];
    var jobs = [];
    for(var i in texts){
        jobs.push(new DataProcessing.Job([texts[i]], function(text){
            return text.length;
        }));
    }

    var pipe = new DataProcessing.LocalStoragePipe(jobs);

    pipe.onJob(function(job){
        job.run();
    });

    pipe.onResult(function(result){
        console.log('#pipe-local-storage-console', result);
    });

    pipe.onFinish(function(results){
        console.log('#pipe-local-storage-console', results);
    });

})();
</script>

<script class="code" data-target="#pipe-cloud-code">
(function(){
    var texts = ['A piece of text', 'A piece of text...', 'A piece of text!'];
    var jobs = [];
    for(var i in texts){
        jobs.push(new DataProcessing.Job([texts[i]], function(text){
            return text.length;
        }));
    }

    var pipe = new DataProcessing.CloudPipe(jobs);

    pipe.onJob(function(job){
        job.run();
    });

    pipe.onResult(function(result){
        console.log('#pipe-cloud-console', result);
    });

    pipe.onFinish(function(results){
        console.log('#pipe-cloud-console', results);
    });

})();
</script>

<script class="code" data-target="#map-reduce-code">
(function(){
    var mapReduce = new DataProcessing.MapReduce(DataProcessing.MemoryPipe);

    mapReduce.addCollection(function(){
        return [
            'Ad et vinculis adfligens in',
            'Et vinculis adfligens in ad',
            'adfligens et strages'
        ];
    });

    mapReduce.map(function(text){
        var words = text.split(/\s/g);
        var results = {};
        for(var i in words){
            var word = words[i].toLowerCase();
            results[word] ? results[word]++ : results[word] = 1;
        }
        return results;
    });

    mapReduce.reduce(function(mapResult, currentResult){
        for(var i in mapResult){
            currentResult[i] = (currentResult[i] || 0) + mapResult[i];
        }
        return currentResult;
    });

    mapReduce.then(function(results){
        // Resolve callback
        console.log('#map-reduce-console', 'Resolve : ', results);
    },function(error){
        // Reject callback
        console.log('#map-reduce-console', 'Reject : ', error);
    },function(result){
        // Notify callback
        console.log('#map-reduce-console', 'Notify : ', result);
    });

})();
</script>

<script src="script/documentation.js"></script>

</body>

</html>